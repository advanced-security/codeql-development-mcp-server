# Integration Test: `codeql_query_run/custom_log_directory`

## PURPOSE

This test validates that the custom `logDir` parameter is accepted and used correctly to store query execution logs in a dedicated directory.

## INPUTS

The following static files are used as inputs for this test:

- `./test-config.json`: Configuration file specifying the parameters for the test, including the custom `logDir` parameter set to `client/integration-tests/primitives/tools/codeql_query_run/custom_log_directory/after`
- `server/ql/javascript/examples/src/ExampleQuery1/ExampleQuery1.ql`: A simple, example CodeQL query to be run by the MCP server tool under test
- `server/ql/javascript/examples/test/ExampleQuery1/ExampleQuery1.testproj`: Test database for the query

## OUTPUTS

Integration testing of the `codeql_query_run` MCP server tool will generate files in the `after/` directory (specified as `logDir`). The expected files include:

- `after/monitoring-state.json`: Expected monitoring state after the tool execution
- `after/evaluator-log.jsonl`: Raw list of structured JSON log lines from the query run (generated via `--evaluator-log` and `--tuple-counting` arguments)
- `after/results.bqrs`: Binary query results file (default output location when not explicitly specified)
- `after/results.sarif`: SARIF-formatted query results (generated by interpreting the BQRS file with `codeql bqrs interpret`)
- `after/query.log`: Detailed query execution log (generated via `--logdir` and `--verbosity=progress+` arguments)
- `after/timestamp`: Single line containing the timestamp (milliseconds since epoch) when the MCP server started the query run

Note: The actual content of log files will vary between runs, but the files should be present and non-empty.
